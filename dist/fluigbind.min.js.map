{"version":3,"file":"fluigbind.min.js","sources":["../src/binder/constants.js","../src/binder/parsers.js","../src/binder/observer.js","../src/forms/dataset.js","../src/forms/field.js","../src/forms/section.js","../src/forms/table.js","../src/binder/fluigbind.js","../src/forms/state.js","../src/binder/view.js","../src/extra/binders.js","../src/binder/bindings.js","../src/binder/adapter.js","../src/binder/formatters.js","../src/binder/component.js","../src/extra/fluig/autocomplete.binder.js","../src/extra/fluig/calendar.binder.js","../src/extra/components.js","../src/extra/fluig/autocomplete.js","../src/extra/fluig/calendar.js","../src/export.js"],"sourcesContent":["export const OPTIONS = [\n  'prefix',\n  'templateDelimiters',\n  'rootInterface',\n  'preloadData',\n  'handler'\n]\n\nexport const EXTENSIONS = [\n  'binders',\n  'formatters',\n  'adapters'\n]","const PRIMITIVE = 0\nconst KEYPATH = 1\nconst TEXT = 0\nconst BINDING = 1\n\nconst QUOTED_STR = /^'.*'$|^\".*\"$/\n\n// Parser and tokenizer for getting the type and value from a string.\nexport function parseType(string) {\n  let type = PRIMITIVE\n  let value = string\n\n  if (QUOTED_STR.test(string)) {\n    value = string.slice(1, -1)\n  } else if (string === 'true') {\n    value = true\n  } else if (string === 'false') {\n    value = false\n  } else if (string === 'null') {\n    value = null\n  } else if (string === 'undefined') {\n    value = undefined\n  } else if (!isNaN(string)) {\n    value = Number(string)\n  } else {\n    type = KEYPATH\n  }\n\n  return {type: type, value: value}\n}\n\n// Template parser and tokenizer for mustache-style text content bindings.\n// Parses the template and returns a set of tokens, separating static portions\n// of text from binding declarations.\nexport function parseTemplate(template, delimiters) {\n  var tokens\n  let length = template.length\n  let index = 0\n  let lastIndex = 0\n  let open = delimiters[0], close = delimiters[1]\n\n  while (lastIndex < length) {\n    index = template.indexOf(open, lastIndex)\n\n    if (index < 0) {\n      if (tokens) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex)\n        })\n      }\n\n      break\n    } else {\n      tokens || (tokens = [])\n      if (index > 0 && lastIndex < index) {\n        tokens.push({\n          type: TEXT,\n          value: template.slice(lastIndex, index)\n        })\n      }\n\n      lastIndex = index + open.length\n      index = template.indexOf(close, lastIndex)\n\n      if (index < 0) {\n        let substring = template.slice(lastIndex - close.length)\n        let lastToken = tokens[tokens.length - 1]\n\n        if (lastToken && lastToken.type === TEXT) {\n          lastToken.value += substring\n        } else {\n          tokens.push({\n            type: TEXT,\n            value: substring\n          })\n        }\n\n        break\n      }\n\n      let value = template.slice(lastIndex, index).trim()\n\n      tokens.push({\n        type: BINDING,\n        value: value\n      })\n\n      lastIndex = index + close.length\n    }\n  }\n\n  return tokens\n}\n","\n// Check if a value is an object than can be observed.\nfunction isObject(obj) {\n  return typeof obj === 'object' && obj !== null\n}\n\n// Error thrower.\nfunction error(message) {\n  throw new Error(`[Observer] ${message}`)\n}\n\nlet adapters;\nlet interfaces;\nlet rootInterface;\n\n// Constructs a new keypath observer and kicks things off.\nclass Observer {\n  static updateOptions (options) {\n    adapters = options.adapters\n    interfaces = Object.keys(adapters)\n    rootInterface = options.rootInterface\n  }\n  \n  // Tokenizes the provided keypath string into interface + path tokens for the\n  // observer to work with.\n  static tokenize (keypath, root) {\n    const tokens = [];\n    let current = {i: root, path: ''};\n    let index;\n    let chr;\n  \n    for (index = 0; index < keypath.length; index++) {\n      chr = keypath.charAt(index)\n  \n      if (!!~interfaces.indexOf(chr)) {\n        tokens.push(current)\n        current = {i: chr, path: ''}\n      } else {\n        current.path += chr\n      }\n    }\n  \n    tokens.push(current)\n    return tokens\n  }\n\n  constructor(obj, keypath, callback) {\n    this.keypath = keypath\n    this.callback = callback\n    this.objectPath = []\n    this.parse()\n    this.obj = this.getRootObject(obj)\n\n    if (isObject(this.target = this.realize())) {\n      this.set(true, this.key, this.target, this.callback)\n    }\n  }\n\n  // Parses the keypath using the interfaces defined on the view. Sets variables\n  // for the tokenized keypath as well as the end key.\n  parse() {\n    let path;\n    let root;\n\n    if (!interfaces.length) {\n      error('Must define at least one adapter interface.')\n    }\n\n    if (!!~interfaces.indexOf(this.keypath[0])) {\n      root = this.keypath[0]\n      path = this.keypath.substr(1)\n    } else {\n      root = rootInterface\n      path = this.keypath\n    }\n\n    this.tokens = Observer.tokenize(path, root)\n    this.key = this.tokens.pop()\n  }\n\n  // Realizes the full keypath, attaching observers for every key and correcting\n  // old observers to any changed objects in the keypath.\n  realize() {\n    let current = this.obj;\n    let unreached = -1;\n    let prev;\n    let token;\n\n    for (let index = 0; index < this.tokens.length; index++) {\n      token = this.tokens[index]\n      if (isObject(current)) {\n        if (typeof this.objectPath[index] !== 'undefined') {\n          if (current !== (prev = this.objectPath[index])) {\n            this.set(false, token, prev, this)\n            this.set(true, token, current, this)\n            this.objectPath[index] = current\n          }\n        } else {\n          this.set(true, token, current, this)\n          this.objectPath[index] = current\n        }\n\n        current = this.get(token, current)\n      } else {\n        if (unreached === -1) {\n          unreached = index\n        }\n\n        if (prev = this.objectPath[index]) {\n          this.set(false, token, prev, this)\n        }\n      }\n    }\n\n    if (unreached !== -1) {\n      this.objectPath.splice(unreached)\n    }\n\n    return current\n  }\n\n  // Updates the keypath. This is called when any intermediary key is changed.\n  sync() {\n    let next;\n    let oldValue;\n    let newValue;\n\n    if ((next = this.realize()) !== this.target) {\n      if (isObject(this.target)) {\n        this.set(false, this.key, this.target, this.callback)\n      }\n\n      if (isObject(next)) {\n        this.set(true, this.key, next, this.callback)\n      }\n\n      oldValue = this.value()\n      this.target = next\n      newValue = this.value()\n      if (newValue !== oldValue || newValue instanceof Function) this.callback.sync()\n    } else if (next instanceof Array) {\n      this.callback.sync()\n    }\n  }\n\n  // Reads the current end value of the observed keypath. Returns undefined if\n  // the full keypath is unreachable.\n  value() {\n    if (isObject(this.target)) {\n      return this.get(this.key, this.target)\n    }\n  }\n\n  // Sets the current end value of the observed keypath. Calling setValue when\n  // the full keypath is unreachable is a no-op.\n  setValue(value) {\n    if (isObject(this.target)) {\n      adapters[this.key.i].set(this.target, this.key.path, value)\n    }\n  }\n\n  // Gets the provided key on an object.\n  get(key, obj) {\n    return adapters[key.i].get(obj, key.path);\n  }\n\n  // Observes or unobserves a callback on the object using the provided key.\n  set(active, key, obj, callback) {\n    const action = active ? 'observe' : 'unobserve';\n    adapters[key.i][action](obj, key.path, callback)\n  }\n\n  // Unobserves the entire keypath.\n  unobserve() {\n    let obj;\n    let token;\n\n    for (let index = 0; index < this.tokens.length; index++) {\n      token = this.tokens[index]\n      if (obj = this.objectPath[index]) {\n        this.set(false, token, obj, this)\n      }\n    }\n\n    if (isObject(this.target)) {\n      this.set(false, this.key, this.target, this.callback)\n    }\n  }\n\n  // traverse the scope chain to find the scope which has the root property\n  // if the property is not found in chain, returns the root scope\n  getRootObject(obj) {\n    let rootProp;\n    let current;\n    if (!obj.$parent) {\n      return obj;\n    }\n\n    if (this.tokens.length) {\n      rootProp = this.tokens[0].path\n    } else {\n      rootProp = this.key.path\n    }\n\n    current = obj;\n    while (current.$parent && (current[rootProp] === undefined)) {\n      current = current.$parent\n    }\n\n    return current;\n  }\n}\n\nexport default Observer\n","\nclass Dataset {\n\n  constructor(datasetName) {\n    this.datasetName = datasetName;\n  }\n\n\n  async load() {\n    const datasetName = this.datasetName\n    if (!datasetName) {\n      throw new Error(`No dataset declared for ${this.name}`)\n    }\n\n    const filterFields = [];\n    const constraints = this.constraints\n    if (constraints) {\n      Object.keys(constraints).forEach(field => {\n        const value = constraints[field]\n        filterFields.push(field);\n        filterFields.push(value);\n      })\n    }\n\n    let content = await [];\n\n    return content;\n  }\n\n}\n\nexport default Dataset","\nimport Dataset from \"./dataset\";\n\nclass Field {\n\n  constructor(label, type) {\n    this.label = label;\n    this.type = type;\n  }\n\n  /**\n   * @param {any} data\n   */\n  set data(data) {\n    this._data = data;\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * @param {any} value\n   */\n  set value(value) {\n    this._value = value;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  /**\n   * @param {Boolean} visible\n   */\n  set visible(visible) {\n    this._visible = visible;\n  }\n\n  get visible() {\n    return this._visible;\n  }\n\n  /**\n   * @param {Boolean} mandatory\n   */\n  set mandatory(mandatory) {\n    this._mandatory = mandatory;\n  }\n\n  get mandatory() {\n    return this._mandatory;\n  }\n\n  /**\n   * @param {Dataset} dataset\n   */\n  set dataset(dataset) {\n    this._dataset = dataset;\n  }\n\n  get dataset() {\n    return this._dataset;\n  }\n\n  init() { }\n  load() { }\n  reset() { }\n  change() { }\n  validate() { }\n  destroy() { }\n\n  clone() {\n    const clone = Object.assign( {}, this );\n\n    return Object.setPrototypeOf( clone, Field.prototype );\n  }\n}\n\nexport default Field","class Section {\n\n  constructor(name) {\n    this.name = name;\n  }\n\n  /**\n   * @param {Boolean} visible\n   */\n  set visible(visible) {\n    this._visible = visible;\n  }\n\n  get visible() {\n    return this._visible;\n  }\n\n  /**\n   * @param {String} title\n   */\n  set title(title) {\n    this._title = title;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  /**\n   * @param {Field[]} fields\n   */\n  set fields(fields) {\n    this._fields = fields;\n  }\n\n  get fields() {\n    return this._fields;\n  }\n\n  init() {}\n  load() {}\n  reset() {}\n  change() {}\n  validate() {}\n  destroy() {}\n\n}\n\nexport default Section;","class Table {\n\n  constructor(tablename) {\n    this.tablename = tablename;\n  }\n\n  /**\n   * @param {Field[]} fields\n   */\n  set fields(fields) {\n    this._fields = fields;\n  }\n\n  get fields() {\n    return this._fields;\n  }\n\n  /**\n   * @param {Object[]} children\n   */\n  set children(children) {\n    this._children = children;\n  }\n\n  get children() {\n    return this._children;\n  }\n\n  init() {}\n  load() {}\n  reset() {}\n  validate() {}\n  add() {\n    // this.children.push({})\n  }\n  remove() {}\n\n}\n\nexport default Table","import { EXTENSIONS } from './constants'\nimport { parseTemplate, parseType } from './parsers'\nimport Field from '../forms/field';\nimport Dataset from '../forms/dataset';\nimport Section from '../forms/section';\nimport Table from '../forms/table';\nimport State from '../forms/state';\n\nconst fluigbind = {\n  State: State,\n  Field: Field,\n  Dataset: Dataset,\n  Section: Section,\n  Table: Table,\n  // Global binders.\n  binders: {},\n\n  // Global formatters.\n  formatters: {},\n\n  // Global sightglass adapters.\n  adapters: {},\n\n  // Default attribute prefix.\n  _prefix: 'flg',\n\n  _fullPrefix: 'flg-',\n\n  defaults: {\n    locale: 'pt-BR',\n    currency: 'BRL'\n  },\n\n  get prefix() {\n    return this._prefix\n  },\n\n  set prefix(value) {\n    this._prefix = value\n    this._fullPrefix = value + '-'\n  },\n\n  parseTemplate: parseTemplate,\n\n  parseType: parseType,\n\n  // Default template delimiters.\n  templateDelimiters: ['{', '}'],\n\n  // Default sightglass root interface.\n  rootInterface: '.',\n\n  // Preload data by default.\n  preloadData: true,\n\n  // Default event handler.\n  handler: function (context, ev, binding) {\n    this.call(context, ev, binding.view.models)\n  },\n\n  // Sets the attribute on the element. If no binder above is matched it will fall\n  // back to using this binder.\n  fallbackBinder: function (el, value) {\n    if (value != null) {\n      el.setAttribute(this.type, value)\n    } else {\n      el.removeAttribute(this.type)\n    }\n  },\n\n  // Merges an object literal into the corresponding global options.\n  configure: function (options) {\n    if (!options) {\n      return\n    }\n    Object.keys(options).forEach(option => {\n      let value = options[option]\n\n      if (EXTENSIONS.indexOf(option) > -1) {\n        Object.keys(value).forEach(key => {\n          this[option][key] = value[key]\n        })\n      } else {\n        this[option] = value\n      }\n    })\n  }\n}\n\nexport default fluigbind\n","class State {\n\n  constructor(id, name) {\n    this.id = id;\n    this.name = name;\n  }\n\n  init() {}\n  load() {}\n\n}\n\nexport default State","import fluigbind from './fluigbind'\nimport {Binding} from './bindings'\nimport {parseTemplate} from './parsers'\n\nconst textBinder = {\n  routine: (node, value) => {\n    node.data = (value != null) ? value : ''\n  }\n}\n\nconst DECLARATION_SPLIT = /((?:'[^']*')*(?:(?:[^\\|']*(?:'[^']*')+[^\\|']*)+|[^\\|]+))|^$/g\n\nconst parseNode = (view, node) => {\n  let block = false\n\n  if (node.nodeType === 3) {\n    let tokens = parseTemplate(node.data, fluigbind.templateDelimiters)\n\n    if (tokens) {\n      for (let i = 0; i < tokens.length; i++) {\n        let token = tokens[i]\n        let text = document.createTextNode(token.value)\n        node.parentNode.insertBefore(text, node)\n\n        if (token.type === 1) {\n          view.buildBinding(text, null, token.value, textBinder, null)\n        }\n      }\n\n      node.parentNode.removeChild(node)\n    }\n    block = true\n  } else if (node.nodeType === 1) {\n    block = view.traverse(node)\n  }\n\n  if (!block) {\n    for (let i = 0; i < node.childNodes.length; i++) {\n      parseNode(view, node.childNodes[i]);\n    }\n  }\n}\n\nconst bindingComparator = (a, b) => {\n  let aPriority = a.binder ? (a.binder.priority || 0) : 0\n  let bPriority = b.binder ? (b.binder.priority || 0) : 0\n  return bPriority - aPriority\n}\n\nconst trimStr = (str) => {\n  return str.trim()\n}\n\n// A collection of bindings built from a set of parent nodes.\nexport default class View {\n  // The DOM elements and the model objects for binding are passed into the\n  // constructor along with any local options that should be used throughout the\n  // context of the view and it's bindings.\n  constructor(els, models, options) {\n    if (els.jquery || els instanceof Array) {\n      this.els = els\n    } else {\n      this.els = [els]\n    }\n\n    this.models = models\n    this.options = options\n\n    this.build()\n  }\n\n\n  buildBinding(node, type, declaration, binder, arg) {\n    let pipes = declaration.match(DECLARATION_SPLIT).map(trimStr)\n\n    let keypath = pipes.shift()\n\n    this.bindings.push(new Binding(this, node, type, keypath, binder, arg, pipes))\n  }\n\n  // Parses the DOM tree and builds `Binding` instances for every matched\n  // binding declaration.\n  build() {\n    this.bindings = []\n\n    let elements = this.els, i, len;\n    for (i = 0, len = elements.length; i < len; i++) {\n      parseNode(this, elements[i])\n    }\n\n    this.bindings.sort(bindingComparator)\n  }\n\n  traverse(node) {\n    let bindingPrefix = fluigbind._fullPrefix\n    let block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE'\n    let attributes = node.attributes\n    let bindInfos = []\n    let starBinders = this.options.starBinders\n    var type, binder, identifier, arg\n\n\n    for (let i = 0, len = attributes.length; i < len; i++) {\n      let attribute = attributes[i]\n      if (attribute.name.indexOf(bindingPrefix) === 0) {\n        type = attribute.name.slice(bindingPrefix.length)\n        binder = this.options.binders[type]\n        arg = undefined\n\n        if (!binder) {\n          for (let k = 0; k < starBinders.length; k++) {\n            identifier = starBinders[k]\n            if (type.slice(0, identifier.length - 1) === identifier.slice(0, -1)) {\n              binder = this.options.binders[identifier]\n              arg = type.slice(identifier.length - 1)\n              break\n            }\n          }\n        }\n\n        if (!binder) {\n          binder = fluigbind.fallbackBinder\n        }\n\n        if (binder.block) {\n          this.buildBinding(node, type, attribute.value, binder, arg)\n          node.removeAttribute(attribute.name)\n          return true;\n        }\n\n        bindInfos.push({attr: attribute, binder: binder, type: type, arg: arg})\n      }\n    }\n\n    for (let i = 0; i < bindInfos.length; i++) {\n      let bindInfo = bindInfos[i]\n      this.buildBinding(node, bindInfo.type, bindInfo.attr.value, bindInfo.binder, bindInfo.arg)\n      node.removeAttribute(bindInfo.attr.name)\n    }\n\n    return block\n  }\n\n  // Binds all of the current bindings for this view.\n  bind() {\n    this.bindings.forEach(binding => {\n      binding.bind()\n    })\n  }\n\n  // Unbinds all of the current bindings for this view.\n  unbind() {\n    this.bindings.forEach(binding => {\n      binding.unbind()\n    })\n  }\n\n  // Syncs up the view with the model by running the routines on all bindings.\n  sync() {\n    this.bindings.forEach(binding => {\n      binding.sync()\n    })\n  }\n\n  // Publishes the input values from the view back to the model (reverse sync).\n  publish() {\n    this.bindings.forEach(binding => {\n      if (binding.binder && binding.binder.publishes) {\n        binding.publish()\n      }\n    })\n  }\n\n  // Updates the view's models along with any affected bindings.\n  update(models = {}) {\n    Object.keys(models).forEach(key => {\n      this.models[key] = models[key]\n    })\n\n    this.bindings.forEach(binding => {\n      if (binding.update) {\n        binding.update(models)\n      }\n    })\n  }\n}\n","import AutocompleteBinder from \"./fluig/autocomplete.binder\"\nimport CalendarBinder from \"./fluig/calendar.binder\";\n\nimport View from \"../binder/view\";\n\nconst getString = (value) => {\n  return value != null ? value.toString() : undefined\n}\n\nconst times = (n, cb) => {\n  for (let i = 0; i < n; i++) cb()\n}\n\nfunction createView(binding, data, anchorEl) {\n  let template = binding.el.cloneNode(true)\n  let view = new View(template, data, binding.view.options)\n  view.bind()\n  binding.marker.parentNode.insertBefore(template, anchorEl)\n  return view\n}\n\nconst binders = {\n  autocomplete: AutocompleteBinder,\n  calendar: CalendarBinder,\n\n  child: (el, index) => {\n    let name = el.name;\n    if (name.indexOf('___') > 0) {\n      name = name.split('___')[0];\n    }\n    el.name = `${name}___${index + 1}`\n  },\n\n  'on-*': {\n    function: true,\n    priority: 1000,\n\n    unbind: function(el) {\n      if (this.handler) {\n        el.removeEventListener(this.arg, this.handler)\n      }\n    },\n\n    routine: function(el, value) {\n      if (this.handler) {\n        el.removeEventListener(this.arg, this.handler)\n      }\n\n      this.handler = this.eventHandler(value)\n      el.addEventListener(this.arg, this.handler)\n    }\n  },\n\n  // Appends bound instances of the element in place for each item in the array.\n  'each-*': {\n    block: true,\n\n    priority: 4000,\n\n    bind: function(el) {\n      if (!this.marker) {\n        this.marker = document.createComment(` fluigbind: ${this.type} `)\n        this.iterated = []\n\n        el.parentNode.insertBefore(this.marker, el)\n        el.parentNode.removeChild(el)\n      } else {\n        this.iterated.forEach(view => {\n          view.bind()\n        })\n      }\n    },\n\n    unbind: function(el) {\n      if (this.iterated) {\n        this.iterated.forEach(view => {\n          view.unbind()\n        })\n      }\n    },\n\n    routine: function(el, collection) {\n      let modelName = this.arg\n      collection = collection || []\n      let indexProp = el.getAttribute('index-property') || '$index'\n\n      collection.forEach((model, index) => {\n        let data = {$parent: this.view.models}\n        data[indexProp] = index\n        data[modelName] = model\n        let view = this.iterated[index]\n\n        if (!view) {\n\n          let previous = this.marker\n\n          if (this.iterated.length) {\n            previous = this.iterated[this.iterated.length - 1].els[0]\n          }\n\n          view = createView(this, data, previous.nextSibling)\n          this.iterated.push(view)\n        } else {\n          if (view.models[modelName] !== model) {\n            // search for a view that matches the model\n            let matchIndex, nextView\n            for (let nextIndex = index + 1; nextIndex < this.iterated.length; nextIndex++) {\n              nextView = this.iterated[nextIndex]\n              if (nextView.models[modelName] === model) {\n                matchIndex = nextIndex\n                break\n              }\n            }\n            if (matchIndex !== undefined) {\n              // model is in other position\n              // todo: consider avoiding the splice here by setting a flag\n              // profile performance before implementing such change\n              this.iterated.splice(matchIndex, 1)\n              this.marker.parentNode.insertBefore(nextView.els[0], view.els[0])\n              nextView.models[indexProp] = index\n            } else {\n              //new model\n              nextView = createView(this, data, view.els[0])\n            }\n            this.iterated.splice(index, 0, nextView)\n          } else {\n            view.models[indexProp] = index\n          }\n        }\n      })\n\n      if (this.iterated.length > collection.length) {\n        times(this.iterated.length - collection.length, () => {\n          let view = this.iterated.pop()\n          view.unbind()\n          this.marker.parentNode.removeChild(view.els[0])\n        })\n      }\n\n      if (el.nodeName === 'OPTION') {\n        this.view.bindings.forEach(binding => {\n          if (binding.el === this.marker.parentNode && binding.type === 'value') {\n            binding.sync()\n          }\n        })\n      }\n    },\n\n    update: function(models) {\n      let data = {}\n\n      //todo: add test and fix if necessary\n\n      Object.keys(models).forEach(key => {\n        if (key !== this.arg) {\n          data[key] = models[key]\n        }\n      })\n\n      this.iterated.forEach(view => {\n        view.update(data)\n      })\n    }\n  },\n\n  // Adds or removes the class from the element when value is true or false.\n  'class-*': function(el, value) {\n    let elClass = ` ${el.className} `\n\n    if (!value === (elClass.indexOf(` ${this.arg} `) > -1)) {\n      if (value) {\n        el.className = `${el.className} ${this.arg}`\n      } else {\n        el.className = elClass.replace(` ${this.arg} `, ' ').trim()\n      }\n    }\n  },\n\n  // Sets the element's text value.\n  text: (el, value) => {\n    el.textContent = value != null ? value : ''\n  },\n\n  // Sets the element's HTML content.\n  html: (el, value) => {\n    el.innerHTML = value != null ? value : ''\n  },\n\n  // Shows the element when value is true.\n  show: (el, value) => {\n    el.style.display = value ? '' : 'none'\n  },\n\n  // Hides the element when value is true (negated version of `show` binder).\n  hide: (el, value) => {\n    el.style.display = value ? 'none' : ''\n  },\n\n  // Enables the element when value is true.\n  enabled: (el, value) => {\n    el.disabled = !value\n  },\n\n  // Disables the element when value is true (negated version of `enabled` binder).\n  disabled: (el, value) => {\n    el.disabled = !!value\n  },\n\n  // Checks a checkbox or radio input when the value is true. Also sets the model\n  // property when the input is checked or unchecked (two-way binder).\n  checked: {\n    publishes: true,\n    priority: 2000,\n\n    bind: function(el) {\n      var self = this;\n      if (!this.callback) {\n        this.callback = function () {\n          self.publish();\n        }\n      }\n      el.addEventListener('change', this.callback)\n    },\n\n    unbind: function(el) {\n      el.removeEventListener('change', this.callback)\n    },\n\n    routine: function(el, value) {\n      if (el.type === 'radio') {\n        el.checked = getString(el.value) === getString(value)\n      } else {\n        el.checked = !!value\n      }\n    }\n  },\n\n  // Sets the element's value. Also sets the model property when the input changes\n  // (two-way binder).\n  value: {\n    publishes: true,\n    priority: 3000,\n\n    bind: function(el) {\n      this.isRadio = el.tagName === 'INPUT' && el.type === 'radio';\n      if (!this.isRadio) {\n        this.event = el.getAttribute('event-name') || (el.tagName === 'SELECT' ? 'change' : 'input')\n\n        var self = this;\n        if (!this.callback) {\n          this.callback = function () {\n            self.publish();\n          }\n        }\n\n        el.addEventListener(this.event, this.callback)\n      }\n    },\n\n    unbind: function(el) {\n      if (!this.isRadio) {\n        el.removeEventListener(this.event, this.callback)\n      }\n    },\n\n    routine: function(el, value) {\n      if (this.isRadio) {\n        el.setAttribute('value', value)\n      } else {\n        if (el.type === 'select-multiple') {\n          if (value instanceof Array) {\n            for (let i = 0; i < el.length; i++) {\n              let option = el[i];\n              option.selected = value.indexOf(option.value) > -1\n            }\n          }\n        } else if (getString(value) !== getString(el.value)) {\n          el.value = value != null ? value : ''\n        }\n      }\n    }\n  },\n\n  // Inserts and binds the element and it's child nodes into the DOM when true.\n  if: {\n    block: true,\n    priority: 4000,\n\n    bind: function(el) {\n      if (!this.marker) {\n        this.marker = document.createComment(' fluigbind: ' + this.type + ' ' + this.keypath + ' ');\n        this.attached = false\n\n        el.parentNode.insertBefore(this.marker, el)\n        el.parentNode.removeChild(el)\n      } else if (this.bound === false && this.nested) {\n        this.nested.bind()\n      }\n      this.bound = true\n    },\n\n    unbind: function() {\n      if (this.nested) {\n        this.nested.unbind()\n        this.bound = false\n      }\n    },\n\n    routine: function(el, value) {\n      if (!!value !== this.attached) {\n        if (value) {\n\n          if (!this.nested) {\n            this.nested = new View(el, this.view.models, this.view.options)\n            this.nested.bind()\n          }\n\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling)\n          this.attached = true\n        } else {\n          el.parentNode.removeChild(el)\n          this.attached = false\n        }\n      }\n    },\n\n    update: function(models) {\n      if (this.nested) {\n        this.nested.update(models)\n      }\n    }\n  }\n}\n\nexport default binders\n","import {parseType} from './parsers'\nimport Observer from './observer'\n\nfunction getInputValue(el) {  \n  if (el.type === 'checkbox') {\n    return el.checked\n  } else if (el.type === 'select-multiple') {\n    const results = []\n    let option\n    for (let i = 0; i < el.options.length; i++) {\n      option = el.options[i]\n      if (option.selected) {\n        results.push(option.value);\n      }\n    }\n    return results\n  } else {\n    return el.value\n  }\n}\n\nconst FORMATTER_ARGS =  /[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g\nconst FORMATTER_SPLIT = /\\s+/\n\n// A single binding between a model attribute and a DOM element.\nexport class Binding {\n  // All information about the binding is passed into the constructor; the\n  // containing view, the DOM node, the type of binding, the model object and the\n  // keypath at which to listen for changes.\n  constructor(view, el, type, keypath, binder, arg, formatters) {\n    this.view = view\n    this.el = el\n    this.type = type\n    this.keypath = keypath\n    this.binder = binder\n    this.arg = arg\n    this.formatters = formatters\n    this.formatterObservers = {}\n    this.model = undefined\n  }\n\n  // Observes the object keypath\n  observe(obj, keypath) {\n    return new Observer(obj, keypath, this)\n  }\n\n  parseTarget() {\n    if (this.keypath) {\n      let token = parseType(this.keypath)\n\n      if (token.type === 0) {\n        this.value = token.value\n      } else {\n        this.observer = this.observe(this.view.models, this.keypath)\n        this.model = this.observer.target\n      }\n    } else {\n      this.value = undefined;\n    }\n  }\n\n  parseFormatterArguments(args, formatterIndex) {\n    return args\n      .map(parseType)\n      .map(({type, value}, ai) => {\n        if (type === 0) {\n          return value\n        } else {\n          if (!this.formatterObservers[formatterIndex]) {\n            this.formatterObservers[formatterIndex] = {}\n          }\n\n          let observer = this.formatterObservers[formatterIndex][ai]\n\n          if (!observer) {\n            observer = this.observe(this.view.models, value)\n            this.formatterObservers[formatterIndex][ai] = observer\n          }\n\n          return observer.value()\n        }\n      })\n  }\n\n  // Applies all the current formatters to the supplied value and returns the\n  // formatted value.\n  formattedValue(value) {\n    return this.formatters.reduce((result, declaration, index) => {\n      let args = declaration.match(FORMATTER_ARGS)\n      let id = args.shift()\n      let formatter = this.view.options.formatters[id]\n\n      const processedArgs = this.parseFormatterArguments(args, index)\n\n      if (formatter && (formatter.read instanceof Function)) {\n        result = formatter.read(result, ...processedArgs)\n      } else if (formatter instanceof Function) {\n        result = formatter(result, ...processedArgs)\n      }\n      return result\n    }, value)\n  }\n\n  // Returns an event handler for the binding around the supplied function.\n  eventHandler(fn) {\n    let binding = this\n    let handler = binding.view.options.handler\n\n    return function(ev) {\n      handler.call(fn, this, ev, binding)\n    }\n  }\n\n  // Sets the value for the binding. This Basically just runs the binding routine\n  // with the supplied value formatted.\n  set(value) {\n    if ((value instanceof Function) && !this.binder.function) {\n      value = this.formattedValue(value.call(this.model))\n    } else {\n      value = this.formattedValue(value)\n    }\n\n    let routineFn = this.binder.routine || this.binder\n\n    if (routineFn instanceof Function) {\n      routineFn.call(this, this.el, value)\n    }\n  }\n\n  // Syncs up the view binding with the model.\n  sync() {\n    if (this.observer) {\n      this.model = this.observer.target\n      this.set(this.observer.value())\n    } else {\n      this.set(this.value)\n    }\n  }\n\n  // Publishes the value currently set on the input element back to the model.\n  publish() {\n    if (this.observer) {\n      var value = this.formatters.reduceRight((result, declaration, index) => {\n        const args = declaration.split(FORMATTER_SPLIT)\n        const id = args.shift()\n        const formatter = this.view.options.formatters[id]\n        const processedArgs = this.parseFormatterArguments(args, index)\n\n        if (formatter && formatter.publish) {\n          result = formatter.publish(result, ...processedArgs)\n        }\n        return result\n      }, this.getValue(this.el))\n\n      this.observer.setValue(value)\n    }\n  }\n\n  // Subscribes to the model for changes at the specified keypath. Bi-directional\n  // routines will also listen for changes on the element to propagate them back\n  // to the model.\n  bind() {\n    this.parseTarget()\n\n    if (this.binder.hasOwnProperty('bind')) {\n      this.binder.bind.call(this, this.el)\n    }\n\n    if (this.view.options.preloadData) {\n      this.sync()\n    }\n  }\n\n  // Unsubscribes from the model and the element.\n  unbind() {\n    if (this.binder.unbind) {\n      this.binder.unbind.call(this, this.el)\n    }\n\n    if (this.observer) {\n      this.observer.unobserve()\n    }\n\n    Object.keys(this.formatterObservers).forEach(fi => {\n      let args = this.formatterObservers[fi]\n\n      Object.keys(args).forEach(ai => {\n        args[ai].unobserve()\n      })\n    })\n\n    this.formatterObservers = {}\n  }\n\n  // Updates the binding's model from what is currently set on the view. Unbinds\n  // the old model first and then re-binds with the new model.\n  update(models = {}) {\n    if (this.observer) {\n      this.model = this.observer.target\n    }\n\n    if (this.binder.update) {\n      this.binder.update.call(this, models)\n    }\n  }\n\n  // Returns elements value\n  getValue(el) {\n    if (this.binder && this.binder.getValue) {\n      return this.binder.getValue.call(this, el)\n    } else {\n      return getInputValue(el)\n    }\n  }\n}\n","/**\n * The default `.` adapter that comes with fluigbind.js. \n * Allows subscribing to properties on plain objects, implemented in \n * ES5 natives using `Object.defineProperty`.\n *\n * @summary The default `.` adapter that comes with fluigbind.js\n * @author Alexson Ferreira\n *\n * Created at     : 2023-03-09 09:22:27 \n * Last modified  : 2023-03-10 09:27:15\n */\n\nconst ARRAY_METHODS = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'sort',\n  'reverse',\n  'splice'\n]\n\nconst adapter = {\n  counter: 0,\n  weakmap: {},\n\n  weakReference: function (obj) {\n    if (!obj.hasOwnProperty('__flg')) {\n      let id = this.counter++\n\n      Object.defineProperty(obj, '__flg', {\n        value: id\n      })\n    }\n\n    if (!this.weakmap[obj.__flg]) {\n      this.weakmap[obj.__flg] = {\n        callbacks: {}\n      }\n    }\n\n    return this.weakmap[obj.__flg]\n  },\n\n  cleanupWeakReference: function(data, refId) {\n    if (!Object.keys(data.callbacks).length) {\n      if (!(data.pointers && Object.keys(data.pointers).length)) {\n        delete this.weakmap[refId]\n      }\n    }\n  },\n\n  stubFunction: function(obj, fn) {\n    const original = obj[fn]\n    const data = this.weakReference(obj)\n    const weakmap = this.weakmap\n\n    obj[fn] = (...args) => {\n      let response = original.apply(obj, args)\n\n      Object.keys(data.pointers).forEach(refId => {\n        let k = data.pointers[refId]\n\n        if (weakmap[refId]) {\n          if (weakmap[refId].callbacks[k] instanceof Array) {\n            weakmap[refId].callbacks[k].forEach(callback => {\n              callback.sync()\n            })\n          }\n        }\n      })\n\n      return response\n    }\n  },\n\n  observeArray: function(value, refId, keypath) {\n    if (value instanceof Array) {\n      let data = this.weakReference(value)\n\n      if (!data.pointers) {\n        data.pointers = {}\n\n        ARRAY_METHODS.forEach(fn => {\n          this.stubFunction(value, fn)\n        })\n      }\n\n      if (!data.pointers[refId]) {\n        data.pointers[refId] = []\n      }\n\n      if (data.pointers[refId].indexOf(keypath) === -1) {\n        data.pointers[refId].push(keypath)\n      }\n    }\n  },\n\n  unobserveArray: function (value, refId, keypath) {\n    if ((value instanceof Array) && (value.__flg != null)) {\n      let data = this.weakmap[value.__flg]\n\n      if (data) {\n        let pointers = data.pointers[refId]\n\n        if (pointers) {\n          let idx = pointers.indexOf(keypath)\n\n          if (idx > -1) {\n            pointers.splice(idx, 1)\n          }\n\n          if (!pointers.length) {\n            delete data.pointers[refId]\n          }\n\n          this.cleanupWeakReference(data, value.__flg)\n        }\n      }\n    }\n  },\n\n  observe: function(obj, keypath, callback) {\n    let value    \n    const callbacks = this.weakReference(obj).callbacks\n\n    if (!callbacks[keypath]) {\n      callbacks[keypath] = []\n      let desc = Object.getOwnPropertyDescriptor(obj, keypath)\n\n      if (!desc || !(desc.get || desc.set || !desc.configurable)) {\n        value = obj[keypath]\n\n        Object.defineProperty(obj, keypath, {\n          enumerable: true,\n\n          get: () => {\n            return value\n          },\n\n          set: newValue => {\n            if (newValue !== value) {\n              this.unobserveArray(value, obj.__flg, keypath)\n              value = newValue\n              const data = this.weakmap[obj.__flg]\n\n              if (data) {\n                let callbacks = data.callbacks[keypath]\n\n                if (callbacks) {\n                  callbacks.forEach(cb => {\n                      cb.sync()\n                  })\n                }\n\n                this.observeArray(newValue, obj.__flg, keypath)\n              }\n            }\n          }\n        })\n      }\n    }\n\n    if (callbacks[keypath].indexOf(callback) === -1) {\n      callbacks[keypath].push(callback)\n    }\n\n    this.observeArray(obj[keypath], obj.__rv, keypath)\n  },\n\n  unobserve: function(obj, keypath, callback) {\n    let data = this.weakmap[obj.__rv]\n\n    if (data) {\n      let callbacks = data.callbacks[keypath]\n\n      if (callbacks) {\n        let idx = callbacks.indexOf(callback)\n\n        if (idx > -1) {\n          callbacks.splice(idx, 1)\n\n          if (!callbacks.length) {\n            delete data.callbacks[keypath]\n            this.unobserveArray(obj[keypath], obj.__flg, keypath)\n          }\n        }\n\n        this.cleanupWeakReference(data, obj.__flg)\n      }\n    }\n  },\n\n  get: function(obj, keypath) {\n    return obj[keypath]\n  },\n\n  set: (obj, keypath, value) => {\n    obj[keypath] = value\n  }\n}\n\nexport default adapter\n","import fluigbind from './fluigbind'\n\nconst formatters = {\n  watch: function(value) {\n    return value;\n  },\n\n  not: function(value) {\n    return !value;\n  },\n\n  json: function(value) {\n    return JSON.stringify(value)\n  },\n\n  number: {\n    read: function (value, style, locale, currency) {\n      \n      style = style || 'decimal';\n      // \"decimal\" for plain number formatting.\n      // \"currency\" for currency formatting.\n      // \"percent\" for percent formatting.\n      // \"unit\" for unit formatting.\n\n      locale = locale || fluigbind.defaults.locale;\n      currency = currency || fluigbind.defaults.currency;\n\n      return new Intl.NumberFormat(locale, { style, currency }).format(value)\n    },\n    publish: function (value) {\n\n      const exp = /^\\w{0,3}\\W?\\s?(\\d+)[.,](\\d+)?,?(\\d+)?$/g\n      const replacer = (f, group1, group2, group3) => {\n        return group3 ? `${group1}${group2}.${group3}` : `${group1}.${group2}`\n      }\n      return parseFloat(value.replace(exp, replacer))\n    }\n  }\n}\n\nexport default formatters","\nimport fluigbind from './fluigbind'\n\nclass Component extends HTMLElement {\n  static get observedAttributes() {\n    const template = this.template\n    if (!template) {\n      throw new Error(`No template declared for ${this.name}`)\n    }\n\n    this.__templateEl = document.createElement('template')\n    this.__templateEl.innerHTML = template\n    \n    const propAttributeMap = this.__propAttributeMap = {}\n    const attributes = []\n    const properties = this.properties\n    if (properties) {\n      Object.keys(properties).forEach(propName => {\n        const propConfig = properties[propName]\n        const attrName = typeof propConfig === 'string' ? propConfig : propName\n        propAttributeMap[attrName] = propName\n        attributes.push(attrName)\n      })\n    }    \n    return attributes\n  }\n\n  connectedCallback() {\n    const nodes = this.constructor.__templateEl.content.cloneNode(true)\n    this.__fluigbindView = fluigbind.bind(nodes, this)    \n    while (this.firstChild) {\n      this.removeChild(this.firstChild);\n    }\n    this.appendChild(nodes)\n  }\n\n  disconnectedCallback() {\n    this.__fluigbindView.unbind()    \n  }\n\n  attributeChangedCallback(name, old, value) {\n    if (old !== value) {      \n      const propName = this.constructor.__propAttributeMap[name]\n      this[propName] = value\n    }\n  }  \n}\n\nexport default Component","\n\nconst AutocompleteBinder = {\n  publishes: true,\n  bind: function (el) {\n    let self = this;\n    let data = this.model.data;\n\n    this.callback = (e) => {\n      self.publish()\n      el.dispatchEvent(new Event(\"change\"))\n    }\n\n    this.model.autocomplete = FLUIGC.autocomplete(el, {\n      source: substringMatcher(this.model),\n      maxTags: 1,\n      templates: {\n        tag: data.tplSelected || '',\n        suggestion: data.tplList || '',\n        tip: data.tplTip || '',\n      },\n      minLength: 0,\n      displayKey: data.displaykey,\n      tagClass: data.tagClass || 'col-xs-12',\n      type: 'tagAutocomplete',\n      tagMaxWidth: 800\n    });\n\n    if (this.model.value) {\n      this.model.autocomplete.add(this.model.value);\n    }\n\n    this.model.autocomplete.on('fluig.autocomplete.itemAdded', this.callback);\n    this.model.autocomplete.on('fluig.autocomplete.itemRemoved', this.callback);\n  },\n  routine: function (el, value) {\n    let oldValue = this.model.autocomplete.items()[0];\n    if (value != oldValue) {\n      if (oldValue) {\n        if (value) {\n          this.model.autocomplete.removeAll();\n        } else {\n          try {\n            this.model.autocomplete.input()[0].parentNode.previousElementSibling.children[0].children[0].style.color = \"white\"\n          } catch (err) { }\n        }\n      }\n      if (value) {\n        this.model.autocomplete.add(value)\n      } else { }\n    }\n  },\n  getValue: function (el) {\n    return this.model.autocomplete.items()[0];\n  }\n}\n\nconst substringMatcher = (model) => (q, cb) => {\n  let adapter = fluigbind.adapters['.'];\n  let name = model.displaykey;\n  let items = adapter.get(model, 'items');\n\n  var matches, substrRegex;\n\n  matches = [];\n\n  substrRegex = new RegExp(q, 'i');\n  items.forEach(str => {\n    if (substrRegex.test(str[name])) {\n      matches.push(str);\n    }\n  })\n\n  // $.each(items, function (i, str) {\n  //   if (substrRegex.test(str[name])) {\n  //     matches.push(str);\n  //   }\n  // });\n  cb(matches);\n}\n\nexport default AutocompleteBinder;","const CalendarBinder = {\n  bind: function (el) {\n    this.changeDate = e => {\n      if (Date.parse(this.model.value) !== this.model.calendar.getTimestampDate()) {\n        this.model.value = this.model.calendar.getDate().format('YYYY-MM-DD HH:MM:SS.s');\n        el.dispatchEvent(new Event(\"change\"))\n      }\n    };\n\n    this.model.calendar = FLUIGC.calendar(el);\n    el.addEventListener('focusout', this.changeDate);\n  },\n  unbind: function (el) {\n    el.removeEventListener('focusout', this.changeDate);\n  },\n  routine: function (el, value) {\n    if (value) {\n      let date = Date.parse(value);\n      this.model.calendar.setDate(new Date(date));\n    }\n  }\n};\n\nexport default CalendarBinder;","import FluigAutocomplete from \"./fluig/autocomplete\";\nimport FluigCalendar from \"./fluig/calendar\";\n\nconst components = {\n  // Binds an event handler on the element.\n  autocomplete: FluigAutocomplete,\n  calendar: FluigCalendar\n}\n\nexport default components","import Component from \"../../binder/component\"\n\nclass FluigAutocomplete extends Component {\n  constructor() {\n    super()\n    var self = this;\n\n    self.model = fields[self.getAttribute('field')]\n  }\n\n  static get template() {\n    return `\n      <div flg-show=\"model.visible\" flg-class-has-error=\"model.errors\" flg-class-has-warning=\"model.warnings\" class=\"form-group\">\n        <label class=\"control-label\">{model.label}</label>\n        <div flg-show=\"model.loading\" class=\"fs-skeleton-loader fs-skeleton-loader-input\"></div>\n        <input flg-autocomplete=\"model.value\" flg-enabled=\"model.editable\" flg-show=\"model.loading | !\" type=\"text\" rv-class=\"model.classes\" flg-on-change=\"model.change\">\n        <p class=\"help-block\" flg-if=\"model.errors\"><i class=\"flaticon flaticon-global-error icon-sm\" aria-hidden=\"true\"></i>{model.errors}</p>\n        <p class=\"help-block\" flg-if=\"model.warnings\"><i class=\"flaticon flaticon-alert icon-sm\" aria-hidden=\"true\"></i>{model.warnings}</p>\n      </div>\n    `\n  }\n\n  static get properties() {\n    return {\n      field: true\n    }\n  }\n}\n\nexport default FluigAutocomplete\n\n// customElements.define('fluig-autocomplete', FluigAutocomplete);","import Component from \"../../binder/component\"\n\nclass FluigCalendar extends Component {\n  constructor() {\n    super()\n    var self = this;\n\n    self.model = fields[self.getAttribute('field')]\n  }\n\n  static get template() {\n    return `\n    <div flg-class-has-error=\"model.errors\" flg-class-has-warning=\"model.warnings\" class=\"form-group fs-text-center\">\n      <label>Início Previsto</label>\n      <input class=\"fs-text-center\" type=\"text\" flg-enabled=\"model.editable\" flg-on-change=\"model.change\" flg-calendar=\"model.value\" />\n      <p class=\"help-block\" flg-if=\"model.errors\">{model.errors}</p>\n      <p class=\"help-block\" flg-if=\"model.warnings\">{model.warnings}</p>\n    </div>\n    `\n  }\n\n  static get properties() {\n    return {\n      field: true\n    }\n  }\n}\n\nexport default FluigCalendar\n\n// customElements.define('fluig-autocomplete', FluigAutocomplete);","import fluigbind from './binder/fluigbind'\nimport View from './binder/view'\nimport {OPTIONS, EXTENSIONS} from './binder/constants'\nimport adapter from './binder/adapter'\nimport formatters from './binder/formatters'\nimport Observer from './binder/observer'\nimport Component from './binder/component'\n\nimport binders from './extra/binders'\nimport components from './extra/components'\n\n// Returns the public interface.\n\nfluigbind.Component = Component\n\nfluigbind.binders = binders\nfluigbind.formatters = formatters\nfluigbind.adapters['.'] = adapter\nfluigbind.components = components;\n\n// Binds some data to a template / element. Returns a fluigbind.View instance.\nfluigbind.bind = (el, models, options) => {\n  let viewOptions = {}\n  models = models || {}\n  options = options || {}\n\n  EXTENSIONS.forEach(extensionType => {\n    viewOptions[extensionType] = Object.create(null)\n\n    if (options[extensionType]) {\n      Object.keys(options[extensionType]).forEach(key => {\n        viewOptions[extensionType][key] = options[extensionType][key]\n      })\n    }\n\n    Object.keys(fluigbind[extensionType]).forEach(key => {\n      if (!viewOptions[extensionType][key]) {\n        viewOptions[extensionType][key] = fluigbind[extensionType][key]\n      }\n    })\n  })\n\n  OPTIONS.forEach(option => {\n    let value = options[option]\n    viewOptions[option] = value != null ? value : fluigbind[option]\n  })\n\n  viewOptions.starBinders = Object.keys(viewOptions.binders).filter(function (key) {\n    return key.indexOf('*') > 0\n  })\n\n  Observer.updateOptions(viewOptions)\n\n  let view = new View(el, models, viewOptions)\n  view.bind()\n  return view\n}\n\nexport default fluigbind\n"],"names":["OPTIONS","EXTENSIONS","QUOTED_STR","parseType","string","type","value","test","slice","undefined","isNaN","Number","parseTemplate","template","delimiters","tokens","index","length","lastIndex","open","close","indexOf","push","substring","lastToken","trim","adapters","interfaces","rootInterface","Dataset","datasetName","this","prototype","load","_regeneratorRuntime","mark","_callee","filterFields","constraints","content","wrap","_context","prev","next","Error","name","Object","keys","forEach","field","sent","abrupt","stop","_load","apply","arguments","Field","label","_proto","init","reset","change","validate","destroy","clone","assign","setPrototypeOf","_createClass","key","get","_data","set","data","_value","_visible","visible","_mandatory","mandatory","_dataset","dataset","Section","_title","title","_fields","fields","Table","tablename","add","remove","_children","children","fluigbind","State","id","binders","formatters","_prefix","_fullPrefix","defaults","locale","currency","prefix","templateDelimiters","preloadData","handler","context","ev","binding","call","view","models","fallbackBinder","el","setAttribute","removeAttribute","configure","options","_this","option","isObject","obj","Observer","keypath","callback","objectPath","parse","getRootObject","target","realize","updateOptions","tokenize","root","chr","current","i","path","charAt","substr","pop","token","unreached","splice","sync","oldValue","newValue","Function","Array","setValue","active","unobserve","rootProp","$parent","parseNode","node","block","nodeType","text","document","createTextNode","parentNode","insertBefore","buildBinding","textBinder","removeChild","traverse","childNodes","bindingComparator","a","b","aPriority","binder","priority","trimStr","str","getString","toString","FORMATTER_ARGS","FORMATTER_SPLIT","Binding","arg","formatterObservers","model","observe","parseTarget","observer","parseFormatterArguments","args","formatterIndex","map","_ref","ai","formattedValue","_this2","reduce","result","declaration","match","shift","formatter","processedArgs","read","concat","eventHandler","fn","function","routineFn","routine","publish","_this3","reduceRight","split","getValue","bind","hasOwnProperty","unbind","_this4","fi","update","getInputValue","checked","results","selected","DECLARATION_SPLIT","View","els","jquery","build","pipes","bindings","elements","len","sort","identifier","bindingPrefix","nodeName","attributes","bindInfos","starBinders","attribute","k","attr","bindInfo","publishes","ARRAY_METHODS","adapter","counter","weakmap","weakReference","defineProperty","__flg","callbacks","cleanupWeakReference","refId","pointers","stubFunction","original","_len","_key","response","observeArray","unobserveArray","idx","desc","getOwnPropertyDescriptor","configurable","enumerable","cb","__rv","watch","not","json","JSON","stringify","number","style","Intl","NumberFormat","format","parseFloat","replace","f","group1","group2","group3","Component","_HTMLElement","_inheritsLoose","connectedCallback","nodes","constructor","__templateEl","cloneNode","__fluigbindView","firstChild","appendChild","disconnectedCallback","attributeChangedCallback","old","__propAttributeMap","createElement","innerHTML","propAttributeMap","properties","propName","propConfig","attrName","_wrapNativeSuper","HTMLElement","substringMatcher","q","displaykey","items","matches","substrRegex","RegExp","createView","anchorEl","marker","autocomplete","self","e","dispatchEvent","Event","FLUIGC","source","maxTags","templates","tag","tplSelected","suggestion","tplList","tip","tplTip","minLength","displayKey","tagClass","tagMaxWidth","on","removeAll","input","previousElementSibling","color","err","calendar","changeDate","Date","getTimestampDate","getDate","addEventListener","removeEventListener","date","setDate","child","on-*","each-*","iterated","createComment","collection","modelName","indexProp","getAttribute","matchIndex","nextView","nextIndex","previous","nextSibling","times","n","class-*","elClass","className","textContent","html","show","display","hide","enabled","disabled","isRadio","tagName","event","if","bound","nested","attached","components","_Component","FluigAutocomplete","_assertThisInitialized","FluigCalendar","viewOptions","extensionType","create","filter"],"mappings":"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"}